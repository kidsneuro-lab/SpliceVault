<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'GA_MEASUREMENT_ID');
  
  $(window).on('load', function() {
    const faq_element = document.querySelector('a[data-value="FAQ"]');
    const faq_element_id = faq_element ? faq_element.id : 'Element not found';
  
    const gte_element = document.querySelector('a[data-value="Gene/Transcript/Exon"]');
    const gte_element_id = gte_element ? gte_element.id : 'Element not found';
  
    const var_element = document.querySelector('a[data-value="Variant"]');
    const var_element_id = var_element ? var_element.id : 'Element not found';
    
    console.log("FAQ element id                        : " + faq_element_id);
    console.log("Gene/Transcript/Exon tab's element id : " + gte_element_id);
    console.log("Variant tab's element id              : " + var_element_id);
    
    $(document).on('click', gte_element_id, function() {
      gtag('event', 'click', {
        'event_category': 'query mode',
        'event_label' : 'gene tx exon'
        });
    });
    
    $(document).on('click', var_element_id, function() {
      gtag('event', 'click', {
        'event_category': 'query mode',
        'event_label' : 'variant'
        });
    });
    
    $(document).on('click', faq_element_id, function() {
      gtag('event', 'click', {
        'event_category': 'faq',
        'event_label' : 'open faq'
        });
    });
  })

  
  $(document).on('click', '#confirm', function() {
    gtag('event', 'click', {
      'event_category': 'retrieve',
      'event_label' : 'retrieve table'
      });
  });
  
  $(document).on('click', '#feedback', function() {
    gtag('event', 'click', {
      'event_category': 'feedback',
      'event_label' : 'click feedback'
      });
  });
  
  $(document).one('change', '#eventsNoInput', function(e) {
    gtag('event', 'change', {
          'event_category': 'settings',
          'event_label' : 'modify event count setting'
    });
  });
  
  $(document).one('change', '#esInput', function() {
    gtag('event', 'change', {
        'event_category': 'settings',
        'event_label' : 'modify skipping setting'
      });
  });

  $(document).one('change', '#cssInput', function() {
    gtag('event', 'change', {
        'event_category': 'settings',
        'event_label' : 'modify cryptic setting'
      });
  });
  
  $(document).on('click', '#allevents', function() {
    gtag('event', 'click', {
      'event_category': 'settings',
      'event_label' : 'show all events'
      });
  });

  
  $(document).on('click', '#allskips', function() {
    gtag('event', 'click', {
      'event_category': 'settings',
      'event_label' : 'show all skipping'
      });
  });
  
  $(document).on('click', '#allcryptics', function() {
    gtag('event', 'click', {
      'event_category': 'settings',
      'event_label' : 'show all cryptics'
      });
  });
    
  $(document).on('click', '#restore', function() {
    gtag('event', 'click', {
      'event_category': 'settings',
      'event_label' : 'restore settings'
      });
  });
  
  
  $(document).on('change', "input[name='dbInput']", function() {
    gtag('event', 'click', {
      'event_category': 'splicesite',
      'event_label' : 'change db'
      });
  });
  
  $(document).on('change', "#geneInput", function() {
    gtag('event', 'change', {
      'event_category': 'splicesite',
      'event_label' : 'change gene'
      });
  });
  
  /*
  
  $(document).on('change', "#txInput", function() {
    gtag('event', 'change', {
      'event_category': 'splicesite',
      'event_label' : 'change tx'
      });
  });
  
  $(document).on('change', "input[name='txTypeInput']", function() {
    gtag('event', 'change', {
      'event_category': 'splicesite',
      'event_label' : 'change tx type'
      });
  });
  
  $(document).on('change', "#exonInput", function() {
    gtag('event', 'change', {
      'event_category': 'splicesite',
      'event_label' : 'change exon'
      });
  });
    
  $(document).on('change', "input[name='ssTypeInput']", function() {
    gtag('event', 'change', {
      'event_category': 'splicesite',
      'event_label' : 'change ss type'
      });
  });
  
  */
  
  $(document).on('click', "shiny:filedownload", function() {
    gtag('event', 'click', {
      'event_category': 'download',
      'event_label' : 'download table'
      });
  });
</script>
